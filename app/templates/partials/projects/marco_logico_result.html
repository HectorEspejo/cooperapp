<div class="ml-tree-node ml-result" data-result-id="{{ result.id }}">
    <div class="ml-node-header">
        <button class="ml-toggle" onclick="toggleNode(this)">
            <span class="toggle-icon">▼</span>
        </button>
        <span class="ml-node-label ml-result-label">{{ result.numero }}</span>
        <span class="ml-node-text">{{ result.descripcion }}</span>
        <div class="ml-node-actions">
            <button
                class="btn btn-icon"
                title="Anadir Actividad"
                hx-get="/projects/{{ project.id }}/marco-logico/activity-form?result_id={{ result.id }}"
                hx-target="#indicator-modal-container"
                hx-swap="innerHTML"
                onclick="document.getElementById('indicator-modal-container').classList.add('active')"
            >+A</button>
            <button
                class="btn btn-icon"
                title="Anadir Indicador"
                hx-get="/projects/{{ project.id }}/marco-logico/indicator-form?framework_id={{ framework.id }}&result_id={{ result.id }}"
                hx-target="#indicator-modal-container"
                hx-swap="innerHTML"
                onclick="document.getElementById('indicator-modal-container').classList.add('active')"
            >+I</button>
            <button
                class="btn btn-icon"
                title="Editar Resultado"
                hx-get="/projects/{{ project.id }}/marco-logico/result-form?result_id={{ result.id }}"
                hx-target="#indicator-modal-container"
                hx-swap="innerHTML"
                onclick="document.getElementById('indicator-modal-container').classList.add('active')"
            >✎</button>
            <button
                class="btn btn-icon btn-danger"
                title="Eliminar"
                hx-delete="/projects/results/{{ result.id }}"
                hx-target="#marco-logico-content"
                hx-swap="innerHTML"
                hx-confirm="¿Eliminar este resultado y todas sus actividades?"
            >✕</button>
        </div>
    </div>

    <!-- Result Indicators -->
    {% if result.indicators %}
    <div class="ml-indicators-inline">
        {% for indicator in result.indicators %}
            {% include "partials/projects/marco_logico_indicator.html" %}
        {% endfor %}
    </div>
    {% endif %}

    <!-- Activities -->
    <div class="ml-node-children">
        {% for activity in result.activities %}
            {% include "partials/projects/marco_logico_activity.html" %}
        {% endfor %}
    </div>
</div>
