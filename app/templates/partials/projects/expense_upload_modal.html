<div class="modal-content expense-upload-modal">
    <div class="modal-header">
        <h3>{{ t('expenses.upload_title') if t is defined else 'Subir Justificante' }}</h3>
        <button type="button" class="modal-close" onclick="closeExpenseUploadModal()">&times;</button>
    </div>
    <div class="upload-info">
        <p><strong>{{ t('expenses.expense_label') if t is defined else 'Gasto:' }}</strong> {{ expense.concepto }}</p>
        <p><strong>{{ t('expenses.line_label') if t is defined else 'Partida:' }}</strong> {{ expense.budget_line.code }} - {{ expense.budget_line.name }}</p>
        <p><strong>{{ t('expenses.amount_label') if t is defined else 'Importe:' }}</strong> {{ "{:,.2f}".format(expense.cantidad_euros) }} EUR</p>
    </div>
    <form hx-post="/projects/{{ project.id }}/expenses/{{ expense.id }}/upload"
          hx-encoding="multipart/form-data"
          hx-target="#expenses-content"
          hx-select="#expenses-content"
          hx-swap="outerHTML"
          hx-on::after-request="closeExpenseUploadModal()">
        <div class="form-group">
            <label for="expense-file">{{ t('expenses.upload_label') if t is defined else 'Documento justificante (factura)' }}</label>
            <input type="file" id="expense-file" name="file" required
                   accept=".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx">
            <small class="form-hint">{{ t('expenses.upload_hint') if t is defined else 'Formatos: PDF, imagenes, Word, Excel' }}</small>
        </div>
        <div class="modal-actions">
            <button type="button" class="btn btn-secondary" onclick="closeExpenseUploadModal()">{{ t('expenses.cancel') if t is defined else 'Cancelar' }}</button>
            <button type="submit" class="btn btn-primary">{{ t('expenses.upload_doc') if t is defined else 'Subir documento' }}</button>
        </div>
    </form>
</div>
